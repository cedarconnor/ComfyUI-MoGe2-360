{
  "permissions": {
    "allow": [
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nChange category from MoGe2 to MoGe2-360\n\nUpdate CATEGORY field in both RunMoGe2Process and MoGe2Panorama nodes to display as \"MoGe2-360\" in ComfyUI node browser instead of just \"MoGe2\".\nEOF\n)\")",
      "Bash(git push:*)",
      "Bash(git restore --staged Tests/)",
      "Bash(git commit -m \"$(cat <<''EOF''\nFix critical panorama slice alignment issues\n\nThis commit addresses severe slice misalignment artifacts that were causing visible seams and geometric discontinuities in panorama merges.\n\nKey fixes:\n\n1. **Ray-distance validation**: Added robust filtering for ray-mode z-buffer distances. Points behind the origin (dist <= 1e-4) are now properly rejected instead of polluting the merge with invalid negative/near-zero distances that were passing the (dist > 0) check due to floating-point imprecision.\n\n2. **Disabled depth_alignment for z_buffer+ray mode**: The per-view alignment was creating order-dependent scale drift across the panorama. Views processed later would be aligned to the accumulation of earlier views, introducing systematic scale shifts across seam boundaries. Alignment is now only applied in radial mode where it''s appropriate.\n\n3. **Point magnitude filtering**: Added validation to reject points with extreme coordinates (magnitude < 1e-6 or > 1e6) which are likely interpolation artifacts from the cv2.remap step at view boundaries.\n\n4. **BorderMode consistency**: Fixed normal remapping to use the same borderMode (WRAP/REPLICATE) as point remapping. Previously normals were using default border handling, causing mismatched seam behavior between geometry and normals.\n\n5. **Minor bug fixes**: \n   - Fixed face_area calculation (was using face_resolution^2 incorrectly)\n   - Fixed img_np variable name in per-view exports\n   - Ensured horizontal_wrap_effective is used consistently\n\nThese changes dramatically improve seam quality, eliminate stepping artifacts at view boundaries, and preserve metric consistency across the merged panorama.\nEOF\n)\")",
      "Bash(git commit -m \"$(cat <<''EOF''\nReorganize parameters, fix GLB rotation default, and improve path handling\n\nUI/UX improvements:\n- Reorganized all parameters into logical sections with headers:\n  * Model Settings\n  * Panorama Splitting\n  * Merge Strategy\n  * Weighted Merge Options\n  * View Filtering & Masking\n  * Depth Processing\n  * Post-Processing\n  * Export Settings\n  * Debug / Advanced\n- Changed glb_rotate_x_deg default from +90 to -90 for better default orientation\n- Updated model_path default to relative path: \"models/Ruicheng/moge-2-vitl-normal.pt\"\n\nTechnical fixes:\n- Implemented proper relative path resolution from ComfyUI root directory\n- Model paths now support both absolute and relative (from ComfyUI root) paths\n- Added NaN/inf filtering before matmul operation to eliminate runtime warning:\n  \"RuntimeWarning: invalid value encountered in matmul\"\n- Updated depth_alignment tooltip to clarify it only activates for radial zbuffer mode\n\nPath resolution logic:\n1. If model_path is provided and exists (absolute or relative to ComfyUI root), use it\n2. Otherwise fall back to version defaults (v1/v2 → models/Ruicheng/...)\n3. Clear error messages show expected path format when models aren''t found\nEOF\n)\")",
      "Bash(git commit -m \"Add visible section headers to node parameters\n\nAdded STRING header parameters that appear as visual separators in the ComfyUI interface:\n- ▼ Model Settings\n- ▼ Panorama Splitting  \n- ▼ Merge Strategy\n- ▼ Weighted Merge Options\n- ▼ View Filtering & Masking\n- ▼ Depth Processing\n- ▼ Post-Processing\n- ▼ Export Settings\n- ▼ Debug / Advanced\n\nHeaders make it much easier to navigate the 50+ parameters and understand which settings belong together. The header strings are ignored during processing.\")"
    ],
    "deny": [],
    "ask": []
  }
}
